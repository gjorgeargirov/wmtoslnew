<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>API Client Test</title>
</head>
<body>
  <h1>API Client Diagnostic Test</h1>
  <div id="results"></div>
  
  <script src="js/api-client.js?v=2"></script>
  <script>
    const results = document.getElementById('results');
    
    function addResult(message, isError = false) {
      const div = document.createElement('div');
      div.style.padding = '10px';
      div.style.margin = '5px';
      div.style.backgroundColor = isError ? '#fee' : '#efe';
      div.style.border = `1px solid ${isError ? '#fcc' : '#cfc'}`;
      div.textContent = message;
      results.appendChild(div);
    }
    
    // Test 1: Check if script loaded
    addResult('Test 1: Checking if api-client.js loaded...');
    if (typeof window.userAPI !== 'undefined') {
      addResult('✅ window.userAPI is defined');
    } else {
      addResult('❌ window.userAPI is NOT defined', true);
    }
    
    if (typeof window.projectAPI !== 'undefined') {
      addResult('✅ window.projectAPI is defined');
    } else {
      addResult('❌ window.projectAPI is NOT defined', true);
    }
    
    if (window.API_BASE_URL) {
      addResult(`✅ window.API_BASE_URL = ${window.API_BASE_URL}`);
    } else {
      addResult('❌ window.API_BASE_URL is NOT defined', true);
    }
    
    // Test 2: Check API methods
    addResult('Test 2: Checking API methods...');
    if (window.userAPI) {
      const methods = ['login', 'getUsers', 'createUser', 'updateUser', 'deleteUser'];
      methods.forEach(method => {
        if (typeof window.userAPI[method] === 'function') {
          addResult(`✅ userAPI.${method} is a function`);
        } else {
          addResult(`❌ userAPI.${method} is NOT a function`, true);
        }
      });
    }
    
    // Test 3: Test API connectivity
    addResult('Test 3: Testing API connectivity...');
    if (window.testAPI) {
      window.testAPI().then(result => {
        if (result.success) {
          addResult(`✅ API Test: ${result.message}`);
        } else {
          addResult(`❌ API Test: ${result.message}`, true);
        }
      }).catch(err => {
        addResult(`❌ API Test Error: ${err.message}`, true);
      });
    } else {
      addResult('❌ testAPI function not available', true);
    }
  </script>
</body>
</html>
